"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[22631,49804,27423,5042,82661,39328,16947,94566,72185,70756,48375,6237,28618,50999,73380,95761,18142,40523,62904,85285,7666,35238,12857,8e4,57619,45714,23333,90476,68095,56190,33809,99631,22012,54869,77250,89155,11536,44393,66774,20583,42964,90608,68227,45846,23465,1084,78703,56322,33941,3417,25798,48179,70560,13893,36274,58655,81036,24369,46750,16226,93845,60988,38607,5750,83369,50512,28131,37178,14797,29035,51416,84273,6654,39511,61892,94749,17130,8083,30464,31452,9071,86690,64309,20976,98595,76214,53833,52404,30023,44261,66642,89023,11404,33785,56166,78547,928,65213,87594,22455,44836,77693,74,11979,34360,67217,89598,1503,23884,9646,87265,54408,32027,20122,97741,42503,88694,66313,96837,19218,41599,63980,86361,8742,31123,53504,17789,40170,84028,61647,39266,16885,73552,51171,28790,6409,4980],{15680:(e,t,r)=>{r.d(t,{xA:()=>p,yg:()=>m});var n=r(96540);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),y=a,m=c["".concat(s,".").concat(y)]||c[y]||d[y]||o;return r?n.createElement(m,i(i({ref:t},p),{},{components:r})):n.createElement(m,i({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}y.displayName="MDXCreateElement"},5400:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(96540),a=r(20053);const o={tabItem:"tabItem_Ymn6"};function i({children:e,hidden:t,className:r}){return n.createElement("div",{role:"tabpanel",className:(0,a.A)(o.tabItem,r),hidden:t},e)}},53720:(e,t,r)=>{r.d(t,{A:()=>D});var n=r(96540),a=r(20053),o=r(65697),i=r(56347),l=r(9226),s=r(34387),u=r(28609);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function d(e){return function(e){var t,r;return null!==(r=null===(t=n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))||void 0===t?void 0:t.filter(Boolean))&&void 0!==r?r:[]}(e).map((({props:{value:e,label:t,attributes:r,default:n}})=>({value:e,label:t,attributes:r,default:n})))}function y(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=null!=t?t:d(r);return function(e){const t=(0,s.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function m({value:e,tabValues:t}){return t.some((t=>t.value===e))}function f({queryString:e=!1,groupId:t}){const r=(0,i.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:e,groupId:t}),o=(0,l.aZ)(a),s=(0,n.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(r.location.search);t.set(a,e),r.replace(c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}({},r.location),{search:t.toString()}))}),[a,r]);return[o,s]}function b(e){const{defaultValue:t,queryString:r=!1,groupId:a}=e,o=y(e),[i,l]=(0,n.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}var r;const n=null!==(r=t.find((e=>e.default)))&&void 0!==r?r:t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[s,p]=f({queryString:r,groupId:a}),[c,d]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,a]=(0,u.Dv)(t);return[r,(0,n.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:a}),b=(()=>{const e=null!=s?s:c;return m({value:e,tabValues:o})?e:null})();(0,n.useLayoutEffect)((()=>{b&&l(b)}),[b]);return{selectedValue:i,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),d(e)}),[p,d,o]),tabValues:o}}var g=r(20162);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}function w(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function P({className:e,block:t,selectedValue:r,selectValue:i,tabValues:l}){const s=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),p=e=>{const t=e.currentTarget,n=s.indexOf(t),a=l[n].value;a!==r&&(u(t),i(a))},c=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;var r;t=null!==(r=s[n])&&void 0!==r?r:s[0];break}case"ArrowLeft":{const r=s.indexOf(e.currentTarget)-1;var n;t=null!==(n=s[r])&&void 0!==n?n:s[s.length-1];break}}null==t||t.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e)},l.map((({value:e,label:t,attributes:o})=>n.createElement("li",w(v({role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,key:e,ref:e=>s.push(e),onKeyDown:c,onClick:p},o),{className:(0,a.A)("tabs__item",h.tabItem,null==o?void 0:o.className,{"tabs__item--active":r===e})}),null!=t?t:e))))}function T({lazy:e,children:t,selectedValue:r}){const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=a.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function j(e){const t=b(e);return n.createElement("div",{className:(0,a.A)("tabs-container",h.tabList)},n.createElement(P,v({},e,t)),n.createElement(T,v({},e,t)))}function D(e){const t=(0,g.A)();return n.createElement(j,v({key:String(t)},e))}},66879:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>p,default:()=>b,frontMatter:()=>u,metadata:()=>c,toc:()=>y});r(96540);var n=r(15680),a=r(53720),o=r(5400);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const u={title:"Operations",slug:"/api/tutorials/operations",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/operations.md"},p="Operations",c={unversionedId:"docs/api/tutorials/operations",id:"docs/api/tutorials/operations",title:"Operations",description:"Why Would You Use Operations APIs?",source:"@site/genDocs/docs/api/tutorials/operations.md",sourceDirName:"docs/api/tutorials",slug:"/api/tutorials/operations",permalink:"/docs/api/tutorials/operations",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/operations.md",tags:[],version:"current",frontMatter:{title:"Operations",slug:"/api/tutorials/operations",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/operations.md"},sidebar:"overviewSidebar",previous:{title:"Incidents",permalink:"/docs/api/tutorials/incidents"},next:{title:"Data Contracts",permalink:"/docs/api/tutorials/data-contracts"}},d={},y=[{value:"Why Would You Use Operations APIs?",id:"why-would-you-use-operations-apis",level:2},{value:"Goal Of This Guide",id:"goal-of-this-guide",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Report Operations",id:"report-operations",level:2},{value:"Read Operations",id:"read-operations",level:2},{value:"Expected Outcomes of Reporting Operations",id:"expected-outcomes-of-reporting-operations",level:3}],m={toc:y},f="wrapper";function b(e){var{components:t}=e,r=s(e,["components"]);return(0,n.yg)(f,l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},m,r),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"operations"},"Operations"),(0,n.yg)("h2",{id:"why-would-you-use-operations-apis"},"Why Would You Use Operations APIs?"),(0,n.yg)("p",null,"The Operations APIs allow you to report operational changes that were made to a given Dataset or Table using the 'Operation' concept.\nThese operations may be viewed on the Dataset Profile (e.g. as last modified time), accessed via the DataHub GraphQL API, or\nused as inputs to DataHub Cloud ",(0,n.yg)("a",{parentName:"p",href:"/docs/managed-datahub/observe/freshness-assertions"},"Freshness Assertions"),". "),(0,n.yg)("h3",{id:"goal-of-this-guide"},"Goal Of This Guide"),(0,n.yg)("p",null,"This guide will show you how to report and query Operations for a Dataset. "),(0,n.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.yg)("p",null,"For this tutorial, you need to deploy DataHub Quickstart and ingest sample data.\nFor detailed steps, please refer to ",(0,n.yg)("a",{parentName:"p",href:"/docs/quickstart"},"DataHub Quickstart Guide"),"."),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"Before reporting operations for a dataset, you need to ensure the targeted dataset is already present in DataHub.")),(0,n.yg)("h2",{id:"report-operations"},"Report Operations"),(0,n.yg)("p",null,"You can use report dataset operations to DataHub using the following APIs. "),(0,n.yg)(a.A,{mdxType:"Tabs"},(0,n.yg)(o.A,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-graphql"},'mutation reportOperation {\n  reportOperation(\n      input: { \n          urn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)", \n          operationType: INSERT,\n          sourceType: DATA_PROCESS\n      }\n  )\n}\n')),(0,n.yg)("p",null,"Where supported operation types include"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"INSERT")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"UPDATE")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"DELETE")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"CREATE")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"ALTER")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"DROP")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"CUSTOM"))),(0,n.yg)("p",null,"If you want to report an operation that happened at a specific time, you can also optionally provide\nthe ",(0,n.yg)("inlineCode",{parentName:"p"},"timestampMillis")," field. If not provided, the current server time will be used as the operation time. "),(0,n.yg)("p",null,"If you see the following response, the operation was successful:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "reportOperation": true\n  },\n  "extensions": {}\n}\n'))),(0,n.yg)(o.A,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/dataset_report_operation.py\nfrom datahub.api.graphql import Operation\n\nDATAHUB_HOST = "https//:org.acryl.io/gms"\nDATAHUB_TOKEN = "<your-datahub-access-token"\n\ndataset_urn = "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)"\n\noperation_client = Operation(\n    datahub_host=DATAHUB_HOST,\n    datahub_token=DATAHUB_TOKEN,\n)\n\noperation_type = "INSERT"\nsource_type = "DATA_PROCESS"  # Source of the operation (data platform or DAG task)\n\n# Report a change operation for the Dataset.\noperation_client.report_operation(\n    urn=dataset_urn, operation_type=operation_type, source_type=source_type\n)\n\n')))),(0,n.yg)("h2",{id:"read-operations"},"Read Operations"),(0,n.yg)("p",null,"You can use read dataset operations to DataHub using the following APIs."),(0,n.yg)(a.A,{mdxType:"Tabs"},(0,n.yg)(o.A,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-graphql"},'query dataset {\n    dataset(urn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)") {\n        operations(\n            limit: 10, filter: [], startTimeMillis: <start-timestamp-ms>, endTimeMillis: <end-timestamp-ms>\n        ) {\n            timestampMillis\n            operationType\n            sourceType\n        }\n    }\n}\n')),(0,n.yg)("p",null,"Where startTimeMillis and endTimeMillis are optional. By default, operations are sorted by time descending. "),(0,n.yg)("p",null,"If you see the following response, the operation was successful:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "dataset": {\n        "operations": [\n            {\n                "timestampMillis": 1231232332,\n                "operationType": "INSERT",\n                "sourceType": "DATA_PROCESS"\n            }\n        ]\n    }\n  },\n  "extensions": {}\n}\n'))),(0,n.yg)(o.A,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/dataset_read_operations.py\nfrom datahub.api.graphql import Operation\n\nDATAHUB_HOST = "https//:org.acryl.io/gms"\nDATAHUB_TOKEN = "<your-datahub-access-token"\n\ndataset_urn = "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)"\n\noperation_client = Operation(\n    datahub_host=DATAHUB_HOST,\n    datahub_token=DATAHUB_TOKEN,\n)\n\n# Query for changes to the Dataset.\noperations = operation_client.query_operations(\n    urn=dataset_urn,\n    # limit=5,\n    # start_time_millis=<timestamp>,\n    # end_time_millis=<timestamo>\n)\n\n')))),(0,n.yg)("h3",{id:"expected-outcomes-of-reporting-operations"},"Expected Outcomes of Reporting Operations"),(0,n.yg)("p",null,"Reported Operations will appear when displaying the Last Updated time for a Dataset on their DataHub Profile.\nThey will also be used when selecting the ",(0,n.yg)("inlineCode",{parentName:"p"},"DataHub Operation")," source type under the ",(0,n.yg)("strong",{parentName:"p"},"Advanced")," settings of a Freshness\nAssertion."))}b.isMDXComponent=!0}}]);