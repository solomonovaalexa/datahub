"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[30987],{7653:(e,t,a)=>{a.d(t,{A:()=>n});const n={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"}},4732:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(89379),i=a(96540),o=a(7653),r=a(38046),s=function(e,t){return i.createElement(r.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:o.A}))};const l=i.forwardRef(s)},15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>m});var n=a(96540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},g="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=u(a),d=i,m=g["".concat(l,".").concat(d)]||g[d]||c[d]||o;return a?n.createElement(m,r(r({ref:t},p),{},{components:a})):n.createElement(m,r({ref:t},p))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:i,r[1]=s;for(var u=2;u<o;u++)r[u]=a[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},43655:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(96540),i=a(20053);const o="availabilityCard_P5od",r="managedIcon_AxXO",s="platform_wqXv",l="platformAvailable_Y8lN";var u=a(4732),p=a(89379);const g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var c=a(38046),d=function(e,t){return n.createElement(c.A,(0,p.A)((0,p.A)({},e),{},{ref:t,icon:g}))};const m=n.forwardRef(d);const h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};var y=function(e,t){return n.createElement(c.A,(0,p.A)((0,p.A)({},e),{},{ref:t,icon:h}))};const b=n.forwardRef(y),f=({saasOnly:e,ossOnly:t})=>n.createElement("div",{className:(0,i.A)(o,"card")},n.createElement("strong",null,"Feature Availability"),n.createElement("div",null,n.createElement("span",{className:(0,i.A)(s,!e&&l)},"Self-Hosted DataHub ",e?n.createElement(u.A,null):n.createElement(m,null))),n.createElement("div",null,n.createElement(b,{className:r}),n.createElement("span",{className:(0,i.A)(s,!t&&l)},"DataHub Cloud ",t?n.createElement(u.A,null):n.createElement(m,null))))},81099:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>g,contentTitle:()=>u,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>c});a(96540);var n=a(15680),i=a(43655);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const l={title:"SCIM Integration: Okta and DataHub",hide_title:!0,sidebar_label:"SCIM Integration: Okta and DataHub",slug:"/managed-datahub/configuring-identity-provisioning-with-okta",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/configuring-identity-provisioning-with-okta.md"},u=void 0,p={unversionedId:"docs/managed-datahub/configuring-identity-provisioning-with-okta",id:"docs/managed-datahub/configuring-identity-provisioning-with-okta",title:"SCIM Integration: Okta and DataHub",description:"SCIM Integration: Okta and DataHub",source:"@site/genDocs/docs/managed-datahub/configuring-identity-provisioning-with-okta.md",sourceDirName:"docs/managed-datahub",slug:"/managed-datahub/configuring-identity-provisioning-with-okta",permalink:"/docs/managed-datahub/configuring-identity-provisioning-with-okta",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/configuring-identity-provisioning-with-okta.md",tags:[],version:"current",frontMatter:{title:"SCIM Integration: Okta and DataHub",hide_title:!0,sidebar_label:"SCIM Integration: Okta and DataHub",slug:"/managed-datahub/configuring-identity-provisioning-with-okta",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/configuring-identity-provisioning-with-okta.md"},sidebar:"overviewSidebar",previous:{title:"SCIM Integration: MS Entra and DataHub",permalink:"/docs/managed-datahub/configuring-identity-provisioning-with-ms-entra"},next:{title:"Taking backup of DataHub",permalink:"/docs/how/backup-datahub"}},g={},c=[{value:"SCIM Integration: Okta and DataHub",id:"scim-integration-okta-and-datahub",level:2},{value:"Overview",id:"overview",level:2},{value:"Why SCIM provisioning?",id:"why-scim-provisioning",level:3},{value:"Configuring SCIM provisioning",id:"configuring-scim-provisioning",level:2},{value:"1. Create an SWA app integration",id:"1-create-an-swa-app-integration",level:3},{value:"2. Configure SCIM",id:"2-configure-scim",level:3},{value:"3. Add a custom attribute to represent roles",id:"3-add-a-custom-attribute-to-represent-roles",level:3},{value:"4. Assign users &amp; groups to the app",id:"4-assign-users--groups-to-the-app",level:3},{value:"The provisioning setup is now complete",id:"the-provisioning-setup-is-now-complete",level:3},{value:"5. (Optional): Configure push groups",id:"5-optional-configure-push-groups",level:3}],d={toc:c},m="wrapper";function h(e){var{components:t}=e,a=s(e,["components"]);return(0,n.yg)(m,r(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}({},d,a),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h2",{id:"scim-integration-okta-and-datahub"},"SCIM Integration: Okta and DataHub"),(0,n.yg)(i.A,{saasOnly:!0,mdxType:"FeatureAvailability"}),(0,n.yg)("h2",{id:"overview"},"Overview"),(0,n.yg)("p",null,"This document covers the steps required to enable SCIM provisioning from Okta to DataHub."),(0,n.yg)("p",null,"This document assumes you are using OIDC for SSO with DataHub.\nSince Okta doesn't currently support SCIM with OIDC, you would need to create an additional SWA-app-integration to enable SCIM provisioning."),(0,n.yg)("p",null,"On completing the steps in this guide, Okta will start automatically pushing changes to users/groups of this SWA-app-integration to DataHub, thereby simplifying provisioning of users/groups in DataHub."),(0,n.yg)("h3",{id:"why-scim-provisioning"},"Why SCIM provisioning?"),(0,n.yg)("p",null,"Let us look at an example of the flows enabled through SCIM provisioning."),(0,n.yg)("p",null,"Consider the following configuration in Okta"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"A group ",(0,n.yg)("inlineCode",{parentName:"li"},"governance-team")),(0,n.yg)("li",{parentName:"ul"},"And it has two members ",(0,n.yg)("inlineCode",{parentName:"li"},"john")," and ",(0,n.yg)("inlineCode",{parentName:"li"},"sid")),(0,n.yg)("li",{parentName:"ul"},"And the group has role ",(0,n.yg)("inlineCode",{parentName:"li"},"Reader"))),(0,n.yg)("p",null,"Through SCIM provisioning, the following are enabled:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"If the ",(0,n.yg)("inlineCode",{parentName:"li"},"governance-team")," group is assigned to the DataHub app in Okta with the role ",(0,n.yg)("inlineCode",{parentName:"li"},"Reader"),", Okta will create the users ",(0,n.yg)("inlineCode",{parentName:"li"},"john")," and ",(0,n.yg)("inlineCode",{parentName:"li"},"sid")," in DataHub with the ",(0,n.yg)("inlineCode",{parentName:"li"},"Reader")," role."),(0,n.yg)("li",{parentName:"ul"},"If you remove ",(0,n.yg)("inlineCode",{parentName:"li"},"john")," from group ",(0,n.yg)("inlineCode",{parentName:"li"},"governance-team")," then ",(0,n.yg)("inlineCode",{parentName:"li"},"john")," would automatically get deactivated in DataHub."),(0,n.yg)("li",{parentName:"ul"},"If you remove ",(0,n.yg)("inlineCode",{parentName:"li"},"sid")," from the DataHub app in Okta, then ",(0,n.yg)("inlineCode",{parentName:"li"},"sid")," would automatically get deactivated in DataHub. ")),(0,n.yg)("p",null,"Generally, any user assignment/unassignment to the app in Okta - directly or through groups - are automatically reflected in the DataHub application."),(0,n.yg)("p",null,"This guide also covers other variations such as how to assign a role to a user directly, and how group-information can be pushed to DataHub."),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},"Only Admin, Editor and Reader roles are supported in DataHub. These roles are preconfigured/created on DataHub.")),(0,n.yg)("h2",{id:"configuring-scim-provisioning"},"Configuring SCIM provisioning"),(0,n.yg)("h3",{id:"1-create-an-swa-app-integration"},"1. Create an SWA app integration"),(0,n.yg)("p",null,"a). Create a new ",(0,n.yg)("a",{parentName:"p",href:"https://help.okta.com/en-us/content/topics/apps/apps_app_integration_wizard_swa.htm"},"SWA app integration"),", called say, ",(0,n.yg)("inlineCode",{parentName:"p"},"DataHub-SCIM-SWA"),"."),(0,n.yg)("p",null,"Note: this app-integration will only be used for SCIM provisioning. You would continue to use the existing OIDC-app-integration for SSO. "),(0,n.yg)("p",null,"b). In the ",(0,n.yg)("inlineCode",{parentName:"p"},"General")," tab of the ",(0,n.yg)("inlineCode",{parentName:"p"},"DataHub-SCIM-SWA")," application, check the ",(0,n.yg)("inlineCode",{parentName:"p"},"Enable SCIM provisioning")," option"),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/appSettingsEnableScim.png"})),(0,n.yg)("p",null,"You may also want to configure the other selections as shown in the above image, so that this application isn't visible to your users."),(0,n.yg)("h3",{id:"2-configure-scim"},"2. Configure SCIM"),(0,n.yg)("p",null,"a). Generate a personal access token from ",(0,n.yg)("a",{parentName:"p",href:"/docs/authentication/personal-access-tokens#creating-personal-access-tokens"},"DataHub"),"."),(0,n.yg)("p",null,"b). In the ",(0,n.yg)("inlineCode",{parentName:"p"},"Provisioning")," tab, configure the DataHub-SCIM endpoint as shown in the below image:"),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/scimConfig1.png"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note"),": Set the value of the ",(0,n.yg)("inlineCode",{parentName:"p"},"Bearer")," field to the personal access token obtained in step (a) above.  "),(0,n.yg)("p",null,"c). Configure the ",(0,n.yg)("inlineCode",{parentName:"p"},"To App")," section as shown below:"),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/scimConfig2.png"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note"),": We are not pushing passwords to DataHub over SCIM, since we are assuming SSO with OIDC as mentioned earlier."),(0,n.yg)("h3",{id:"3-add-a-custom-attribute-to-represent-roles"},"3. Add a custom attribute to represent roles"),(0,n.yg)("p",null,"a). Navigate to ",(0,n.yg)("inlineCode",{parentName:"p"},"Directory")," -> ",(0,n.yg)("inlineCode",{parentName:"p"},"Profile Editor"),", and select the user-profile of this new application."),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/profileEditor.png"})),(0,n.yg)("p",null,"b). Click ",(0,n.yg)("inlineCode",{parentName:"p"},"Add Attribute")," and define a new attribute that will be used to specify the role of a DataHub user."),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/defineRoleAttribute.png"})),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Set value of ",(0,n.yg)("inlineCode",{parentName:"li"},"External name")," to ",(0,n.yg)("inlineCode",{parentName:"li"},"roles.^[primary==true].value")),(0,n.yg)("li",{parentName:"ul"},"Set value of ",(0,n.yg)("inlineCode",{parentName:"li"},"External namespace")," to ",(0,n.yg)("inlineCode",{parentName:"li"},"urn:ietf:params:scim:schemas:core:2.0:User")),(0,n.yg)("li",{parentName:"ul"},"Define an enumerated list of values as shown in the above image"),(0,n.yg)("li",{parentName:"ul"},"Mark this attribute as required"),(0,n.yg)("li",{parentName:"ul"},"Select ",(0,n.yg)("inlineCode",{parentName:"li"},"Attribute type")," as ",(0,n.yg)("inlineCode",{parentName:"li"},"Personal"))),(0,n.yg)("p",null,"c). Add a similar attribute for groups i.e. repeat step (b) above, but select ",(0,n.yg)("inlineCode",{parentName:"p"},"Attribute Type")," as ",(0,n.yg)("inlineCode",{parentName:"p"},"Group"),". (Specify the variable name as, say, ",(0,n.yg)("inlineCode",{parentName:"p"},"dataHubGroupRoles"),".)"),(0,n.yg)("h3",{id:"4-assign-users--groups-to-the-app"},"4. Assign users & groups to the app"),(0,n.yg)("p",null,"Assign users and groups to the app from the ",(0,n.yg)("inlineCode",{parentName:"p"},"Assignments")," tab:"),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/assignUsersGroups.png"})),(0,n.yg)("p",null,"While assigning a user/group, choose an appropriate value for the dataHubRoles/dataHubGroupRoles attribute.\nNote that when a role is selected for a group, the corresponding role is pushed for all users of that group in DataHub."),(0,n.yg)("h3",{id:"the-provisioning-setup-is-now-complete"},"The provisioning setup is now complete"),(0,n.yg)("p",null,"Once the above steps are completed, user assignments/unassignments to the DataHub-SCIM-SWA app in Okta will get reflected in DataHub automatically."),(0,n.yg)("blockquote",null,(0,n.yg)("h4",{parentName:"blockquote",id:"a-note-on-user-deletion"},"A note on user deletion"),(0,n.yg)("p",{parentName:"blockquote"},'Note that when users are unassigned or deactivated in Okta, the corresponding users in DataHub are also deactivated (marked "suspended").\nBut when a user is ',(0,n.yg)("em",{parentName:"p"},"deleted")," in Okta, the corresponding user in DataHub does ",(0,n.yg)("em",{parentName:"p"},"not")," get deleted.\nRefer the Okta documentation on ",(0,n.yg)("a",{parentName:"p",href:"https://developer.okta.com/docs/concepts/scim/#delete-deprovision"},"Delete (Deprovision)")," for more details.")),(0,n.yg)("h3",{id:"5-optional-configure-push-groups"},"5. (Optional): Configure push groups"),(0,n.yg)("p",null,"When groups are assigned to the app, Okta pushes the group-members as users to DataHub, but the group itself isn't pushed.\nTo push group information to DataHub, configure the ",(0,n.yg)("inlineCode",{parentName:"p"},"Push Groups")," tab accordingly as shown below:"),(0,n.yg)("p",null,(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/scim/okta/pushGroups.png"})),(0,n.yg)("p",null,"Refer to the Okta ",(0,n.yg)("a",{parentName:"p",href:"https://help.okta.com/en-us/content/topics/users-groups-profiles/app-assignments-group-push.htm"},"Group Push")," documentation for more details."))}h.isMDXComponent=!0}}]);